<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Modules &mdash; vipertools 0.0.1 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="1. Tutorials" href="tutorials.html" />
    <link rel="prev" title="Welcome to vipertools’s documentation!" href="../index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> vipertools
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Modules:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#parse">parse</a></li>
<li class="toctree-l2"><a class="reference internal" href="#stitch">stitch</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">1. Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#parsing-and-stitching-data-from-opera-phenix">1.1. Parsing and Stitching Data from Opera Phenix</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">vipertools</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Modules</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/pages/modules.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="module-vipertools.parse">
<span id="modules"></span><h1>Modules<a class="headerlink" href="#module-vipertools.parse" title="Permalink to this headline"></a></h1>
<div class="section" id="parse">
<h2>parse<a class="headerlink" href="#parse" title="Permalink to this headline"></a></h2>
<p>Contains functions to parse imaging data into a usable formats for downstream pipelines.</p>
<dl class="py function">
<dt class="sig sig-object py" id="vipertools.parse.parse_phenix">
<span class="sig-prename descclassname"><span class="pre">vipertools.parse.</span></span><span class="sig-name descname"><span class="pre">parse_phenix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">phenix_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flatfield_exported</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parallel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">WGAbackground</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipertools.parse.parse_phenix" title="Permalink to this definition"></a></dt>
<dd><p>Function to automatically rename TIFS exported from Harmony into a format where row and well ID as well as Tile position are indicated in the file name.
Example of an exported file name: “Timepoint{#}_Row{#}_Well{#}_{channel}_zstack{#}_r{#}_c{#}.tif”</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>phenix_dir</strong> – Path indicating the exported harmony files to parse.</p></li>
<li><p><strong>flatfield_exported</strong> – boolean indicating if the data was exported from harmony with or without flatfield correction.</p></li>
<li><p><strong>parallel</strong> – boolean value indicating if the data parsing should be performed with parallelization or without (CURRENTLY NOT FUNCTIONAL ONLY USE AS FALSE)</p></li>
<li><p><strong>WGAbackground</strong> – export second copy of WGA stains for background correction to improve segmentation. If set to False not performed. Else enter value of the channel
that should be copied and contains the WGA stain.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="vipertools.parse.sort_timepoints">
<span class="sig-prename descclassname"><span class="pre">vipertools.parse.</span></span><span class="sig-name descname"><span class="pre">sort_timepoints</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parsed_dir</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipertools.parse.sort_timepoints" title="Permalink to this definition"></a></dt>
<dd><p>Additionally sort generated timecourse images according to well and tile position. Function
generates a new folder called timecourse_sorted which contains a unqiue folder for each unique tile
position containing all imaging data (i.e. zstacks, timepoints, channels) of that tile.
This function is meant for quick sorting of generated images for simple import of e.g. timecourse
experiments into FIJI.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>parsed_dir</strong> – filepath to parsed images folder generated with the function parse_phenix.</p>
</dd>
</dl>
</dd></dl>

</div>
<span class="target" id="module-vipertools.stitch"></span><div class="section" id="stitch">
<h2>stitch<a class="headerlink" href="#stitch" title="Permalink to this headline"></a></h2>
<p>Collection of functions to perform stitching of parsed image Tiffs.</p>
<dl class="py function">
<dt class="sig sig-object py" id="vipertools.stitch.generate_stitched">
<span class="sig-prename descclassname"><span class="pre">vipertools.stitch.</span></span><span class="sig-name descname"><span class="pre">generate_stitched</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slidename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pattern</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outdir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overlap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_shift</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">30</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stitching_channel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Alexa488'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">no_rescale_channel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">crop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'bottom':</span> <span class="pre">0,</span> <span class="pre">'left':</span> <span class="pre">0,</span> <span class="pre">'right':</span> <span class="pre">0,</span> <span class="pre">'top':</span> <span class="pre">0}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_QC</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filetype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['.tif']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">WGAchannel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">do_intensity_rescale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">export_XML</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipertools.stitch.generate_stitched" title="Permalink to this definition"></a></dt>
<dd><p>Function to generate a scaled down thumbnail of stitched image. Can be used for example to
get a low resolution overview of the scanned region to select areas for exporting high resolution
stitched images.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_dir</strong> – Path to the folder containing exported TIF files named with the following nameing convention: “Row{#}_Well{#}_{channel}_zstack{#}_r{#}_c{#}.tif”.
These images can be generated for example by running the vipertools.parse.parse_phenix() function.</p></li>
<li><p><strong>pattern</strong> – Regex string to identify the naming pattern of the TIFs that should be stitched together.
For example: “Row1_Well2_{channel}_zstack3_r{row:03}_c{col:03}.tif”.
All values in {} indicate thos which are matched by regex to find all matching tifs.</p></li>
<li><p><strong>outdir</strong> – path indicating where the stitched images should be written out</p></li>
<li><p><strong>overlap</strong> – value between 0 and 1 indicating the degree of overlap that was used while recording data at the microscope.</p></li>
<li><p><strong>max_shift</strong> – value indicating the maximum threshold for tile shifts. Default value in ashlar is 15.</p></li>
<li><p><strong>name</strong> – string indicating the slidename that is added to the stitched images generated</p></li>
<li><p><strong>stitching_channel</strong> – string indicating the channel name on which the stitching should be calculated. the positions for each tile calculated in this channel will be
passed to the other channels.</p></li>
<li><p><strong>crop</strong> – dictionary of the form {‘top’:0, ‘bottom’:0, ‘left’:0, ‘right’:0} indicating how many pixels (based on a generated thumbnail,
see vipertools.stitch.generate_thumbnail) should be cropped from the final image in each indicated dimension. Leave this set to default
if no cropping should be performed.</p></li>
<li><p><strong>plot_QC</strong> – boolean value indicating if QC plots should be generated</p></li>
<li><p><strong>filetype</strong> – list containing any of [“.tif”, “.ome.zarr”, “.ome.tif”] defining to which type of file the stiched results should be written. If more than one
element all export types will be generated in the same output directory.</p></li>
<li><p><strong>WGAchannel</strong> – string indicating the name of the WGA channel in case an illumination correction should be performed on this cahhenl</p></li>
<li><p><strong>do_intensity_rescale</strong> – boolean value indicating if the rescale_p1_P99 function should be applied before stitching or not. Alternatively partial then it will only
rescale those channels provided as a list in rescale_channels</p></li>
<li><p><strong>export_XML</strong> – boolean value. If true than an xml is exported when writing to .tif which allows for the import into BIAS.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="vipertools.stitch.generate_thumbnail">
<span class="sig-prename descclassname"><span class="pre">vipertools.stitch.</span></span><span class="sig-name descname"><span class="pre">generate_thumbnail</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pattern</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outdir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overlap</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stitching_channel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'DAPI'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">export_examples</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">do_intensity_rescale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipertools.stitch.generate_thumbnail" title="Permalink to this definition"></a></dt>
<dd><p>Function to generate a scaled down thumbnail of stitched image. Can be used for example to
get a low resolution overview of the scanned region to select areas for exporting high resolution
stitched images.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_dir</strong> – Path to the folder containing exported TIF files named with the following nameing convention: “Row{#}_Well{#}_{channel}_zstack{#}_r{#}_c{#}.tif”.
These images can be generated for example by running the vipertools.parse.parse_phenix() function.</p></li>
<li><p><strong>pattern</strong> – Regex string to identify the naming pattern of the TIFs that should be stitched together.
For example: “Row1_Well2_{channel}_zstack3_r{row:03}_c{col:03}.tif”.
All values in {} indicate thos which are matched by regex to find all matching tifs.</p></li>
<li><p><strong>outdir</strong> – path indicating where the stitched images should be written out</p></li>
<li><p><strong>overlap</strong> – value between 0 and 1 indicating the degree of overlap that was used while recording data at the microscope.</p></li>
<li><p><strong>name</strong> – string indicating the slidename that is added to the stitched images generated</p></li>
<li><p><strong>export_examples</strong> – boolean value indicating if individual example tiles should be exported in addition to performing thumbnail generation.</p></li>
<li><p><strong>do_intensity_rescale</strong> – boolean value indicating if the rescale_p1_P99 function should be applied before stitching or not.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="toctree-wrapper compound">
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../index.html" class="btn btn-neutral float-left" title="Welcome to vipertools’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="tutorials.html" class="btn btn-neutral float-right" title="1. Tutorials" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Sophia Maedler.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>